<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirect</title>
    <script>
        // 获取 URL 参数
        function getQueryParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // 检查 URL 是否可用
        function checkUrl(url, callback) {
            const xhr = new XMLHttpRequest();
            xhr.open('HEAD', url, true);
            xhr.timeout = 3000;
            xhr.onload = function() {
                callback(xhr.status >= 200 && xhr.status < 400);
            };
            xhr.onerror = function() {
                callback(false);
            };
            xhr.send();
        }

        // 执行重定向逻辑
        function redirectTo() {
            const path = getQueryParameter('path');
            const urls = [
                'https://www.baidu.com/s?ie=UTF-8&wd=' + encodeURIComponent(path),
                'https://www.google.com/search?q=' + encodeURIComponent(path)
            ];

            if (path === 'boq') {
                let urlIndex = 0;

                function tryNextUrl() {
                    if (urlIndex < urls.length) {
                        checkUrl(urls[urlIndex], function(isAvailable) {
                            if (isAvailable) {
                                window.location.href = urls[urlIndex];
                            } else {
                                urlIndex++;
                                tryNextUrl();
                            }
                        });
                    } else {
                        console.log('所有URL均不可用');
                    }
                }

                tryNextUrl();
            }
        }

        window.onload = redirectTo;
    </script>
</head>
<body>
    <h1>...</h1>
</body>
</html>
